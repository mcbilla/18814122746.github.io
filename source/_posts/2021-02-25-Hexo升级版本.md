---
title: Hexo升级版本
date: 2021-02-25 22:48:17
updated: 2021-02-26 22:48:17
categories: Hexo
tags: Hexo
---

> 本文介绍了 Hexo 博客框架以及所使用主题 Next 的升级过程。经过一番折腾，最终把 Hexo 从 3.7.1 升级到 6.3.0，把 Next 主题从 4.3.0 升级到 7.8.0。升级后发现性能提升较为明显，特地记录下升级过程，方便下一次版本升级。

# 升级 Hexo

`hexo`本身是一个静态博客生成工具，具备编译Markdown、拼接主题模板、生成 HTML、上传 Git 等基本功能。`hexo-cli`能够将这些功能封装为命令，提供给用户通过`hexo server / hexo deploy`等命令调用的模块。`CLI = Command Line Interface`命令行界面。先全局升级 `hexo-cli`：

```shell
$ npm install hexo-cli -g
```

`npm-check` 检查系统中的插件是否有升级的，可以看到自己前面都安装了那些插件。

```shell
$ npm install -g npm-check
$ npm-check
```

`npm-upgrade` 升级系统中的插件

```shell
$ npm install -g npm-upgrade
$ npm-upgrade
```

更新全局包。`-g` 参数表示安装到全局 `node_modules` 目录中，如果不带 `-g` 参数就表示把包安装到 npm 命令执行所在目录的`node_modules`目录中。

```shell
$ npm update -g
```

进入 Hexo 安装目录，更新依赖包。`—save` 参数表示在更新 `node_modules`目录的同时并且添加到 `dependencies` 文件中。

```shell
$ npm update --save
```

升级完查看 Hexo 版本

```shell
$ hexo vesion
```

然后再查看 `dependencies` 文件，发现 hexo 版本已经更新到 6.3.0。

```
{
  "name": "hexo-site",
  "version": "0.0.0",
  "private": true,
  "hexo": {
    "version": "6.3.0"
  },
  "dependencies": {
    "gitalk": "^1.8.0",
    "hexo": "^6.3.0",
    "hexo-admin": "^2.3.0",
    "hexo-deployer-git": "^3.0.0",
    "hexo-generator-archive": "^2.0.0",
    "hexo-generator-baidu-sitemap": "^0.1.9",
    "hexo-generator-category": "^2.0.0",
    "hexo-generator-index": "^3.0.0",
    "hexo-generator-searchdb": "^1.4.1",
    "hexo-generator-sitemap": "^3.0.1",
    "hexo-generator-tag": "^2.0.0",
    "hexo-renderer-ejs": "^2.0.0",
    "hexo-renderer-marked": "^6.0.0",
    "hexo-renderer-stylus": "^2.1.0",
    "hexo-renderer-swig": "^2.0.0",
    "hexo-server": "^3.0.0"
  },
  "scripts": {
    "start": "hexo clean && hexo g && hexo s",
    "debug": "hexo clean && hexo g",
    "deploy": "hexo clean && hexo g -d"
  }
}
```

# 升级 Next 主题

 NexT 主题升级从 v5 升级到 v7，跨度很大，但是官方提供了升级指导：[从 NexT v5.1.x 更新](https://github.com/theme-next/hexo-theme-next/blob/master/docs/zh-CN/UPDATE-FROM-5.1.X.md)